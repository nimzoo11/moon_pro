<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Moon_Pro</title>
    <!-- Google Fonts - ì „ ì„¸ê³„ ë¬¸ì ì§€ì› -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;700&family=Noto+Sans+JP:wght@400;700&family=Noto+Sans+KR:wght@400;700&family=Noto+Sans+SC:wght@400;700&family=Noto+Sans+TC:wght@400;700&family=Noto+Color+Emoji&family=Noto+Sans+Math&family=Noto+Sans+Symbols&family=STIX+Two+Math&family=STIX+Two+Text&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans', 'Noto Sans Math', 'Noto Sans Symbols', 'STIX Two Math', 'STIX Two Text', 'Noto Sans CJK KR', 'Noto Sans CJK JP', 'Noto Sans CJK SC', 'Noto Sans CJK TC', 'Noto Color Emoji', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Segoe UI', 'Malgun Gothic', 'ë§‘ì€ ê³ ë”•', 'Microsoft YaHei', 'SimHei', 'Hiragino Sans', 'Yu Gothic', 'Meiryo', 'Cambria Math', 'STIX Math', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #e3f2fd 0%, #fce4ec 50%, #f3e5f5 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            animation: backgroundShift 10s ease-in-out infinite alternate;
        }

        @keyframes backgroundShift {
            0% { background: linear-gradient(135deg, #e3f2fd 0%, #fce4ec 50%, #f3e5f5 100%); }
            50% { background: linear-gradient(135deg, #f3e5f5 0%, #e3f2fd 50%, #fce4ec 100%); }
            100% { background: linear-gradient(135deg, #fce4ec 0%, #f3e5f5 50%, #e3f2fd 100%); }
        }

        .main-container {
            display: flex;
            gap: 20px;
            max-width: 1400px;
            width: 100%;
        }

        .character-picker {
            width: 600px;
            height: 700px;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(15px);
            border-radius: 25px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.1), 0 0 0 1px rgba(255, 255, 255, 0.3);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            animation: floatUp 0.8s ease-out, glowPulse 3s ease-in-out infinite alternate;
            border: 2px solid rgba(144, 202, 249, 0.3);
        }

        .tools-panel {
            width: 500px;
            height: 700px;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(15px);
            border-radius: 25px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.1), 0 0 0 1px rgba(255, 255, 255, 0.3);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            animation: floatUp 0.8s ease-out 0.2s both, glowPulse 3s ease-in-out infinite alternate;
            border: 2px solid rgba(240, 98, 146, 0.3);
        }

        @keyframes floatUp {
            0% { 
                opacity: 0;
                transform: translateY(30px) scale(0.95);
            }
            100% { 
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        @keyframes glowPulse {
            0% { 
                box-shadow: 0 25px 50px rgba(0, 0, 0, 0.1), 0 0 20px rgba(144, 202, 249, 0.2);
            }
            100% { 
                box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15), 0 0 30px rgba(144, 202, 249, 0.4);
            }
        }

        .header {
            background: linear-gradient(135deg, #90caf9 0%, #f48fb1 50%, #ce93d8 100%);
            color: white;
            padding: 20px;
            text-align: center;
            font-weight: bold;
            font-size: 18px;
            position: relative;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            animation: headerGlow 2s ease-in-out infinite alternate;
        }

        .header::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #90caf9, #f48fb1, #ce93d8, #90caf9);
            background-size: 200% 100%;
            animation: gradientMove 3s ease-in-out infinite;
        }

        @keyframes headerGlow {
            0% { text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2), 0 0 10px rgba(255, 255, 255, 0.3); }
            100% { text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2), 0 0 20px rgba(255, 255, 255, 0.6); }
        }

        @keyframes gradientMove {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .tab-container {
            display: flex;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
            overflow-x: auto;
        }

        .tab {
            min-width: 85px;
            padding: 12px 10px;
            text-align: center;
            cursor: pointer;
            font-size: 11px;
            background: transparent;
            border: none;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            white-space: nowrap;
            position: relative;
            overflow: hidden;
            border-radius: 15px 15px 0 0;
        }

        .tab::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(144, 202, 249, 0.3), transparent);
            transition: left 0.5s ease;
        }

        .tab:hover::before {
            left: 100%;
        }

        .tab.active {
            background: linear-gradient(135deg, #90caf9 0%, #f48fb1 100%);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(144, 202, 249, 0.3);
            font-weight: bold;
        }

        .tab:hover:not(.active) {
            background: rgba(144, 202, 249, 0.1);
            transform: translateY(-1px);
        }

        .search-container {
            padding: 15px;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
        }

        .search-input {
            width: 100%;
            padding: 10px 15px;
            border: 2px solid #e9ecef;
            border-radius: 25px;
            font-size: 14px;
            outline: none;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .content-area {
            flex: 1;
            overflow: hidden;
            position: relative;
        }

        .character-grid {
            height: 100%;
            padding: 15px;
            overflow-y: auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(40px, 1fr));
            gap: 8px;
            align-content: start;
        }

        .character-item {
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 26px;
            cursor: pointer;
            border-radius: 12px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            background: transparent;
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .character-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(144, 202, 249, 0.1) 0%, rgba(240, 98, 146, 0.1) 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
            border-radius: 10px;
        }

        .character-item:hover::before {
            opacity: 1;
        }

        .character-item:hover {
            transform: scale(1.25) rotate(5deg);
            z-index: 10;
            border-color: rgba(144, 202, 249, 0.5);
            box-shadow: 0 8px 25px rgba(144, 202, 249, 0.3);
        }

        .character-item:active {
            transform: scale(1.15) rotate(2deg);
            background: linear-gradient(135deg, rgba(144, 202, 249, 0.2) 0%, rgba(240, 98, 146, 0.2) 100%);
        }

        .category-divider {
            grid-column: 1 / -1;
            text-align: center;
            font-size: 12px;
            color: #666;
            margin: 10px 0;
            padding: 5px;
            background: linear-gradient(90deg, transparent, #e9ecef, transparent);
            border-radius: 10px;
        }

        .tool-section {
            display: none;
            flex-direction: column;
            height: 100%;
        }

        .tool-section.active {
            display: flex;
        }

        .tool-content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }

        .input-group {
            margin-bottom: 15px;
        }

        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #333;
        }

        .input-group input, .input-group textarea, .input-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 14px;
            outline: none;
            transition: border-color 0.3s ease;
        }

        .input-group input:focus, .input-group textarea:focus, .input-group select:focus {
            border-color: #667eea;
        }

        .btn {
            background: linear-gradient(135deg, #90caf9 0%, #f48fb1 50%, #ce93d8 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            width: 100%;
            margin-top: 15px;
            position: relative;
            overflow: hidden;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
            box-shadow: 0 4px 15px rgba(144, 202, 249, 0.3);
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.6s ease;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 8px 25px rgba(144, 202, 249, 0.4);
        }

        .btn:active {
            transform: translateY(-1px) scale(0.98);
        }

        .output-area {
            background: #fff;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 15px;
            margin-top: 15px;
            white-space: pre-wrap;
            font-family: 'Noto Sans CJK KR', 'Malgun Gothic', 'ë§‘ì€ ê³ ë”•', sans-serif;
            font-size: 14px;
            line-height: 1.4;
            position: relative;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            word-break: break-word;
            overflow-wrap: break-word;
            overflow-y: auto;
        }

        /* í•œê¸€ ë³€í™˜ ê²°ê³¼ ì¶œë ¥ì°½ì— NFD ìµœì í™” ìŠ¤íƒ€ì¼ ì ìš© */
        #koreanOutputText {
            font-family: 'Noto Sans', 'Noto Sans Math', 'Noto Sans Symbols', 'Noto Sans CJK KR', 'Noto Sans CJK JP', 'Noto Sans CJK SC', 'Noto Sans CJK TC', 'Noto Color Emoji', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Consolas', 'Monaco', 'Courier New', 'Cambria Math', 'STIX Math', 'Malgun Gothic', 'ë§‘ì€ ê³ ë”•', 'Microsoft YaHei', 'SimHei', 'Hiragino Sans', 'Yu Gothic', 'Meiryo', 'sans-serif', monospace !important;
            font-size: 13px !important;
            line-height: 1.6 !important;
            letter-spacing: 0.3px !important;
            word-spacing: 0.1em !important;
        }

        /* Zero-Width Spaceê°€ ë” ëª…í™•í•˜ê²Œ ë³´ì´ë„ë¡ ìŠ¤íƒ€ì¼ë§ */
        #koreanOutputText::before {
            content: '';
            display: inline-block;
            width: 0;
            height: 0;
        }

        /* ì¼ë°˜ í•œê¸€ì„ íŒŒë€ìƒ‰ìœ¼ë¡œ êµ¬ë¶„í•˜ëŠ” ìŠ¤íƒ€ì¼ */
        .korean-regular {
            color: #007AFF !important;
        }

        .copy-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #667eea;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
        }

        /* í•œê¸€ ë³€í™˜ ê²°ê³¼ì™€ ìœ ë‹ˆì½”ë“œ ê²€ì¦ ê²°ê³¼ì˜ ë³µì‚¬ ë²„íŠ¼ì„ í•˜ë‹¨ì— ìœ„ì¹˜ */
        #koreanOutputText + .copy-btn,
        #koreanOutputText ~ .copy-btn,
        #unicodeVerifyOutputText + .copy-btn,
        #unicodeVerifyOutputText ~ .copy-btn {
            top: auto;
            bottom: 10px;
        }

        .ascii-gallery {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
            max-height: 300px;
            overflow-y: auto;
        }

        .ascii-item {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Courier New', monospace;
            font-size: 10px;
            white-space: pre;
            border: 2px solid transparent;
        }

        .ascii-item:hover {
            background: #e9ecef;
            border-color: #667eea;
        }

        .copy-notification {
            position: fixed;
            top: 30px;
            right: 30px;
            background: linear-gradient(135deg, #90caf9 0%, #f48fb1 50%, #ce93d8 100%);
            color: white;
            padding: 15px 25px;
            border-radius: 30px;
            font-weight: bold;
            font-size: 14px;
            transform: translateX(400px) scale(0.8);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 1000;
            box-shadow: 0 8px 25px rgba(144, 202, 249, 0.4);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.3);
            animation: notificationPulse 0.6s ease-out;
        }

        @keyframes notificationPulse {
            0% { transform: translateX(400px) scale(0.8); }
            50% { transform: translateX(0) scale(1.1); }
            100% { transform: translateX(0) scale(1); }
        }

        .copy-notification.show {
            transform: translateX(0);
        }

        .character-grid::-webkit-scrollbar {
            width: 6px;
        }

        .character-grid::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 3px;
        }

        .character-grid::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 3px;
        }

        .character-grid::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }

        /* ëª¨ë°”ì¼ ë°˜ì‘í˜• CSS */
        @media (max-width: 768px) {
            body {
                padding: 10px;
                align-items: flex-start;
            }
            
            .main-container {
                flex-direction: column;
                gap: 15px;
                max-width: 100%;
            }
            
            .character-picker {
                width: 100%;
                height: 60vh;
                order: 2; /* ì•„ë˜ë¡œ ì´ë™ */
            }
            
            .tools-panel {
                width: 100%;
                height: 35vh;
                order: 1; /* ìœ„ë¡œ ì´ë™ */
            }
            
            .tab-container {
                overflow-x: auto;
                scrollbar-width: thin;
            }
            
            .tab {
                min-width: 70px;
                font-size: 10px;
                padding: 10px 8px;
            }
            
            .character-grid {
                grid-template-columns: repeat(auto-fill, minmax(35px, 1fr));
                gap: 8px;
                padding: 10px;
            }
            
            .character-item {
                width: 35px;
                height: 35px;
                font-size: 16px;
            }
            
            .search-container input {
                font-size: 16px; /* iOS ì¤Œ ë°©ì§€ */
            }
            
            .header {
                padding: 15px;
                font-size: 16px;
            }
            
            .tool-content {
                padding: 15px;
            }
            
            .input-group textarea {
                height: 120px !important;
            }
            
            #koreanOutputText, #unicodeVerifyOutputText {
                height: 120px !important;
            }
        }

        @media (max-width: 480px) {
            .character-picker {
                height: 55vh;
            }
            
            .tools-panel {
                height: 40vh;
            }
            
            .character-grid {
                grid-template-columns: repeat(auto-fill, minmax(32px, 1fr));
                gap: 6px;
            }
            
            .character-item {
                width: 32px;
                height: 32px;
                font-size: 14px;
            }
            
            .tab {
                min-width: 60px;
                font-size: 9px;
                padding: 8px 6px;
            }
            
            .header {
                padding: 12px;
                font-size: 14px;
            }
            
            .tool-content {
                padding: 12px;
            }
            
            .input-group textarea {
                height: 100px !important;
            }
            
            #koreanOutputText, #unicodeVerifyOutputText {
                height: 100px !important;
            }
            
            .copy-notification {
                top: 20px;
                right: 20px;
                font-size: 12px;
                padding: 10px 15px;
            }
        }
    </style>
</head>
<body>
    <div class="main-container">
        <!-- ë¬¸ì & ê¸°í˜¸ ì„ íƒê¸° -->
        <div class="character-picker">
            <div class="header">
                ğŸ¨ ë¶€ê°€ê¸°ëŠ¥ì€ ì—¬ê¸°ë¡œ~!
            </div>
            
            <div class="tab-container">
                <button class="tab active" data-category="emoji">ğŸ˜€<br>ì´ëª¨í‹°ì½˜</button>
                <button class="tab" data-category="symbols">â—‰<br>ê¸°í˜¸</button>
                <button class="tab" data-category="unicodeVerify">ğŸ”<br>ë³€í™˜ê²€ì¦í•˜ê¸°</button>
            </div>
            
            
            <div class="content-area">
                <div class="character-grid" id="characterGrid">
                    <!-- ë¬¸ìë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
                </div>
                
            </div>
        </div>

        <!-- ë„êµ¬ íŒ¨ë„ -->
        <div class="tools-panel" id="koreanPanel">
            <div class="header">
                ğŸ› ï¸ ë¬¸ì ë³€í™˜
            </div>
            
            <div class="tool-content">
                <div class="input-group">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                        <label>âŒ¨ï¸ í…ìŠ¤íŠ¸ ì…ë ¥</label>
                        <div id="koreanInputCounter" style="background: #f8f9fa; padding: 4px 8px; border-radius: 12px; font-size: 12px; color: #666; border: 1px solid #e9ecef;">0/70</div>
                    </div>
                    <textarea id="koreanInput" placeholder="ë³€í™˜í•  í•œê¸€ì„ ì…ë ¥í•˜ì„¸ìš”..." rows="8" style="height: 200px; resize: none;"></textarea>
                </div>
                <button class="btn" id="koreanBtn">ë³€í™˜í•˜ê¸°</button>
                <div class="input-group">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                        <label>ğŸ”® ë³€í™˜ ê²°ê³¼</label>
                        <div id="koreanOutputCounter" style="background: #f8f9fa; padding: 4px 8px; border-radius: 12px; font-size: 12px; color: #666; border: 1px solid #e9ecef;">0/70(0/140B)</div>
                    </div>
                    <div style="position: relative;">
                        <div id="koreanOutputText" contenteditable="true" style="height: 200px; padding: 15px; border: 2px solid #e9ecef; border-radius: 12px; background: #fff; font-family: 'Noto Sans CJK KR', 'Malgun Gothic', 'ë§‘ì€ ê³ ë”•', sans-serif; font-size: 14px; line-height: 1.4; outline: none; white-space: pre-wrap; word-break: break-word; overflow-wrap: break-word; box-shadow: 0 2px 8px rgba(0,0,0,0.1); overflow-y: auto; position: relative;"></div>
                        <button class="copy-btn" id="koreanCopyBtn" style="position: absolute; bottom: 10px; right: 10px; width: auto; min-width: 50px; height: 30px; font-size: 12px; padding: 5px 10px; z-index: 10;">ë³µì‚¬</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ìœ ë‹ˆì½”ë“œ ê²€ì¦ íŒ¨ë„ -->
        <div class="tools-panel" id="unicodeVerifyPanel" style="display: none;">
            <div class="header">
                ğŸ” ìœ ë‹ˆì½”ë“œ ê²€ì¦
            </div>
            
            <div class="tool-content">
                <div class="input-group">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                        <label>âŒ¨ï¸ ê²€ì¦í•  í…ìŠ¤íŠ¸</label>
                        <div id="unicodeVerifyInputCounter" style="background: #f8f9fa; padding: 4px 8px; border-radius: 12px; font-size: 12px; color: #666; border: 1px solid #e9ecef;">0/70</div>
                    </div>
                    <textarea id="unicodeVerifyInput" placeholder="ìœ ë‹ˆì½”ë“œ êµ¬ì„±ì„ ê²€ì¦í•  í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”..." rows="8" style="height: 200px; resize: none;"></textarea>
                </div>
                <button class="btn" id="unicodeVerifyBtn">ğŸ” ê²€ì¦í•˜ê¸°</button>
                <div class="input-group">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                        <label>ğŸ” ìœ ë‹ˆì½”ë“œ êµ¬ì„± ê²€ì¦ ê²°ê³¼</label>
                        <div id="unicodeVerifyOutputCounter" style="background: #f8f9fa; padding: 4px 8px; border-radius: 12px; font-size: 12px; color: #666; border: 1px solid #e9ecef;">0/70(0/140B)</div>
                    </div>
                    <div style="position: relative;">
                        <div id="unicodeVerifyOutputText" contenteditable="true" style="height: 200px; padding: 15px; border: 2px solid #e9ecef; border-radius: 12px; background: #fff; font-family: 'Noto Sans', 'Noto Sans Math', 'Noto Sans Symbols', 'Noto Sans CJK KR', 'Noto Sans CJK JP', 'Noto Sans CJK SC', 'Noto Sans CJK TC', 'Noto Color Emoji', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Consolas', 'Monaco', 'Courier New', 'Cambria Math', 'STIX Math', 'Malgun Gothic', 'ë§‘ì€ ê³ ë”•', 'Microsoft YaHei', 'SimHei', 'Hiragino Sans', 'Yu Gothic', 'Meiryo', 'sans-serif', monospace; font-size: 13px; line-height: 1.6; outline: none; white-space: pre-wrap; word-break: break-word; overflow-wrap: break-word; box-shadow: 0 2px 8px rgba(0,0,0,0.1); overflow-y: auto; position: relative; letter-spacing: 0.3px; word-spacing: 0.1em;"></div>
                        <button class="copy-btn" id="unicodeVerifyCopyBtn" style="position: absolute; bottom: 10px; right: 10px; width: auto; min-width: 50px; height: 30px; font-size: 12px; padding: 5px 10px; z-index: 10;">ë³µì‚¬</button>
                    </div>
                </div>
            </div>
        </div>




        </div>
    </div>

    <div class="copy-notification" id="copyNotification">
        ğŸ“‹ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!
    </div>

    <script>
        /* ========================================
           ì „ì—­ ë³€ìˆ˜ - ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒíƒœ ê´€ë¦¬
        ======================================== */
        // í˜„ì¬ í™œì„±í™”ëœ ë¬¸ì ì¹´í…Œê³ ë¦¬ (ì´ëª¨í‹°ì½˜, ê¸°í˜¸, ìˆ˜í•™ ë“±)
        let currentCategory = 'emoji';
        // í˜„ì¬ í™œì„±í™”ëœ í…ìŠ¤íŠ¸ ë³€í™˜ ë„êµ¬ (í•œê¸€ë¶„ë¦¬, ê¸€ê¼´ë³€í™˜, ASCIIì•„íŠ¸, ê²°í•©ë¬¸ì)
        let currentTool = 'korean';

        /* ========================================
           ë¬¸ì ë°ì´í„°ë² ì´ìŠ¤ - ì¹´í…Œê³ ë¦¬ë³„ íŠ¹ìˆ˜ë¬¸ì ë° ì´ëª¨í‹°ì½˜
        ======================================== */
        // ê° ì¹´í…Œê³ ë¦¬ë³„ë¡œ ë¶„ë¥˜ëœ ë¬¸ìë“¤ì˜ ë°ì´í„°ë² ì´ìŠ¤
        const characterCategories = {
            emoji: {
                'ğŸ˜€ ì–¼êµ´ê³¼ ê°ì •': [
                    'ğŸ˜€', 'ğŸ˜ƒ', 'ğŸ˜„', 'ğŸ˜', 'ğŸ˜†', 'ğŸ˜…', 'ğŸ˜‚', 'ğŸ¤£', 'ğŸ˜Š', 'ğŸ˜‡', 'ğŸ™‚', 'ğŸ™ƒ', 'ğŸ˜‰', 'ğŸ˜Œ', 'ğŸ˜', 'ğŸ¥°',
                    'ğŸ˜˜', 'ğŸ˜—', 'ğŸ˜™', 'ğŸ˜š', 'ğŸ˜‹', 'ğŸ˜›', 'ğŸ˜', 'ğŸ˜œ', 'ğŸ¤ª', 'ğŸ¤¨', 'ğŸ§', 'ğŸ¤“', 'ğŸ˜', 'ğŸ¤©', 'ğŸ¥³', 'ğŸ˜',
                    'ğŸ˜’', 'ğŸ˜', 'ğŸ˜”', 'ğŸ˜Ÿ', 'ğŸ˜•', 'ğŸ™', 'â˜¹ï¸', 'ğŸ˜£', 'ğŸ˜–', 'ğŸ˜«', 'ğŸ˜©', 'ğŸ¥º', 'ğŸ˜¢', 'ğŸ˜­'
                ],
                'ğŸ’– í•˜íŠ¸ì™€ ì‚¬ë‘': [
                    'â¤ï¸', 'ğŸ§¡', 'ğŸ’›', 'ğŸ’š', 'ğŸ’™', 'ğŸ’œ', 'ğŸ–¤', 'ğŸ¤', 'ğŸ¤', 'ğŸ’”', 'â£ï¸', 'ğŸ’•', 'ğŸ’', 'ğŸ’“', 'ğŸ’—', 'ğŸ’–',
                    'ğŸ’˜', 'ğŸ’', 'ğŸ’Ÿ', 'ğŸ’Œ', 'ğŸ’’', 'ğŸ’', 'ğŸ’', 'ğŸ‘‘', 'ğŸ’', 'ğŸŒ¹', 'ğŸŒº', 'ğŸŒ¸', 'ğŸŒ»', 'ğŸŒ·'
                ],
                'ğŸŒŸ í™œë™ê³¼ ìŠ¤í¬ì¸ ': [
                    'âš½', 'ğŸ€', 'ğŸˆ', 'âš¾', 'ğŸ¥', 'ğŸ¾', 'ğŸ', 'ğŸ‰', 'ğŸ¥', 'ğŸ±', 'ğŸª€', 'ğŸ“', 'ğŸ¸', 'ğŸ’', 'ğŸ‘', 'ğŸ¥',
                    'ğŸ', 'ğŸªƒ', 'ğŸ¥…', 'â›³', 'ğŸª', 'ğŸ¹', 'ğŸ£', 'ğŸ¤¿', 'ğŸ¥Š', 'ğŸ¥‹', 'ğŸ½', 'ğŸ›¹', 'ğŸ›¼', 'ğŸ›·', 'â›¸ï¸', 'ğŸ¥Œ',
                    'ğŸ„', 'ğŸ–ï¸', 'â›·ï¸'
                ],
                'ğŸ­ ì˜¤ë¸Œì íŠ¸ì™€ ê¸°í˜¸': [
                    'ğŸ¨', 'ğŸ­', 'ğŸª', 'ğŸ«', 'ğŸŸï¸', 'ğŸ¬', 'ğŸ¤', 'ğŸ§', 'ğŸ¼', 'ğŸµ', 'ğŸ¶', 'ğŸ¥‡', 'ğŸ¥ˆ', 'ğŸ¥‰', 'ğŸ†', 'ğŸ…',
                    'ğŸ–ï¸', 'ğŸµï¸', 'ğŸ—ï¸', 'ğŸª', 'ğŸ¤¹', 'ğŸ™ï¸', 'ğŸ“»', 'ğŸ”‘', 'ğŸ‘—', 'ğŸ‘™', 'ğŸ‘˜'
                ],
                'ğŸ“ ê¸°íƒ€ ì´ëª¨ì§€': [
                    'ğŸ—', 'ğŸ”', 'ğŸ•', 'ğŸš—', 'ğŸš•', 'ğŸš™', 'â­•ï¸', 'âŒ', 'âœ…', 'â', 'ğŸ†—', '0ï¸âƒ£', '1ï¸âƒ£', '2ï¸âƒ£', '3ï¸âƒ£', '4ï¸âƒ£',
                    '5ï¸âƒ£', '6ï¸âƒ£', '7ï¸âƒ£', '8ï¸âƒ£', '9ï¸âƒ£', 'ğŸ”Ÿ', 'â–¶ï¸', 'â—€ï¸', 'ğŸ”¼', 'ğŸ”½', 'ğŸ“', 'â•', 'â–', 'â—', 'âœ–ï¸', 'â™¾ï¸',
                    'ğŸ™†â€â™€ï¸', 'ğŸ™†â€â™‚ï¸', 'ğŸ™‹â€â™€ï¸', 'ğŸ™‹â€â™‚ï¸', 'ğŸ™‡â€â™€ï¸', 'ğŸ™‡â€â™‚ï¸', 'ğŸ¤¦â€â™€ï¸', 'ğŸ¤¦â€â™‚ï¸', 'ğŸ¤·â€â™€ï¸', 'ğŸ¤·â€â™‚ï¸', 'ğŸ¤·â€â™€ï¸', 'ğŸ¤·â€â™‚ï¸', 'ğŸ¤·â€â™€ï¸', 'ğŸ¤·â€â™‚ï¸'
                ]
            },
            symbols: {
                'â—‰ ê¸°ë³¸ ê¸°í˜¸': [
                    'â€¢', 'â€£', 'âƒ', 'â—¦', 'â–ª', 'â–«', 'â–¬', 'â—Š', 'â—‹', 'â—', 'â—¯', 'â—‰', 'â—', 'â¦¿', 'âŠ™', 'âŠš',
                    'âŠ›', 'âŠœ', 'âŠ', 'âŠ', 'âŠŸ', 'âŠ ', 'âŠ¡', 'âŠ¢', 'âŠ£', 'âŠ¤', 'âŠ¥', 'âŠ¦', 'âŠ§', 'âŠ¨', 'âŠ©', 'âŠª'
                ],
                'â˜… ë³„ê³¼ ì¥ì‹': [
                    'â˜…', 'â˜†', 'âœ¦', 'âœ§', 'âœ©', 'âœª', 'âœ«', 'âœ¬', 'âœ­', 'âœ®', 'âœ¯', 'âœ°', 'âœ±', 'âœ²', 'âœ³', 'âœ´',
                    'âœµ', 'âœ¶', 'âœ·', 'âœ¸', 'âœ¹', 'âœº', 'âœ»', 'âœ¼', 'âœ½', 'âœ¾', 'âœ¿', 'â€', 'â', 'â‚', 'âƒ', 'â‡'
                ],
                '( ê¸°í˜¸': [
                    '(', 'ï¼ˆ', 'â¨', 'âª', 'ï¸µ', 'âŸ®', 'â¦…'
                ],
                ') ê¸°í˜¸': [
                    ')', 'ï¼‰', 'â©', 'â«', 'ï¸¶', 'âŸ¯', 'â¦†'
                ],
                '{ ê¸°í˜¸': [
                    '{', 'ï½›', 'â´', 'ï¹›', 'â¦ƒ'
                ],
                '} ê¸°í˜¸': [
                    '}', 'ï½', 'âµ', 'ï¹œ', 'â¦„'
                ],
                '[ ê¸°í˜¸': [
                    '[', 'ï¼»', 'â²', 'âŸ¦', 'â¦‹'
                ],
                '] ê¸°í˜¸': [
                    ']', 'ï¼½', 'â³', 'âŸ§', 'â¦Œ'
                ],
                '< ê¸°í˜¸': [
                    '<', 'ï¼œ', 'â®', 'â€¹', 'â‰º'
                ],
                '> ê¸°í˜¸': [
                    '>', 'ï¼', 'â¯', 'â€º', 'â‰»'
                ],
                '% ê¸°í˜¸': [
                    '%', 'ï¼…', 'â€°', 'â€±', 'â„…'
                ],
                '+ ê¸°í˜¸': [
                    '+', 'ï¼‹', 'â•', 'âœš', 'âŠ•', 'âŠ'
                ],
                '- ê¸°í˜¸': [
                    '-', 'ï¼', 'â–', 'â€”', 'â€', 'â€“', 'âŠ–'
                ],
                '* ê¸°í˜¸': [
                    '*', 'ï¼Š', 'âœ±', 'âœ³', 'âœ¹', 'âœ½', 'â‹', 'â¨€'
                ],
                '! ê¸°í˜¸': [
                    '!', 'ï¼', 'â—', 'â•', 'â€¼'
                ],
                '? ê¸°í˜¸': [
                    '?', 'ï¼Ÿ', 'â“', 'â”', 'â‡', 'â‰'
                ],
                '~ ê¸°í˜¸': [
                    '~', 'ï½', 'Ëœ', 'âˆ¼'
                ],
                '| ê¸°í˜¸': [
                    '|', 'ï½œ', 'â˜', 'â™', 'âš', 'â€–'
                ],
                '& ê¸°í˜¸': [
                    '&', 'ï¼†', 'ï¹ '
                ],
                '. ê¸°í˜¸': [
                    '.', 'ï¼', 'ãƒ»', 'â€¢', 'â€§', 'â‹…'
                ],
                ', ê¸°í˜¸': [
                    ',', 'ï¼Œ', 'ã€', 'â€›', 'â€š'
                ],
                ': ê¸°í˜¸': [
                    ':', 'ï¼š', 'Ë'
                ],
                '; ê¸°í˜¸': [
                    ';', 'ï¼›', 'ï¹”'
                ],
                '@ ê¸°í˜¸': [
                    '@', 'ï¼ ', 'ï¹«'
                ],
                '# ê¸°í˜¸': [
                    '#', 'ï¼ƒ', 'âŒ—'
                ],
                '$ ê¸°í˜¸': [
                    '$', 'ï¼„', 'â‚µ', 'â‚¡'
                ]
            }
        };


        /* ========================================
           ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ˆê¸°í™” - DOM ë¡œë“œ ì™„ë£Œ í›„ ì‹¤í–‰
        ======================================== */
        // í˜ì´ì§€ DOMì´ ì™„ì „íˆ ë¡œë“œëœ í›„ ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ˆê¸°í™” ì‹¤í–‰
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });

        /**
         * ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ì²´ ì´ˆê¸°í™” í•¨ìˆ˜
         * - ëª¨ë“  ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆì™€ UI ì»´í¬ë„ŒíŠ¸ë¥¼ ì„¤ì •
         * - ì´ˆê¸° ë°ì´í„° ë Œë”ë§ ìˆ˜í–‰
         */
        function initializeApp() {
            setupCategoryTabs();    // ë¬¸ì ì¹´í…Œê³ ë¦¬ íƒ­ ì„¤ì •
            setupToolButtons();     // ë„êµ¬ ë²„íŠ¼ë“¤ ì´ë²¤íŠ¸ ì„¤ì •
            renderCharacters();     // ì´ˆê¸° ë¬¸ì ë Œë”ë§
        }

        /* ========================================
           ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì • í•¨ìˆ˜ë“¤
        ======================================== */
        
        /**
         * ë¬¸ì ì¹´í…Œê³ ë¦¬ íƒ­ í´ë¦­ ì´ë²¤íŠ¸ ì„¤ì •
         * - ì´ëª¨í‹°ì½˜, ê¸°í˜¸, ìˆ˜í•™, í™”ì‚´í‘œ ë“± ì¹´í…Œê³ ë¦¬ ì „í™˜ ê¸°ëŠ¥
         */
        function setupCategoryTabs() {
            const tabs = document.querySelectorAll('.character-picker .tab');
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const category = this.getAttribute('data-category');
                    switchCategory(category, this);
                });
            });
        }



        /**
         * í…ìŠ¤íŠ¸ ë³€í™˜ ë„êµ¬ë“¤ì˜ ë²„íŠ¼ ì´ë²¤íŠ¸ ì„¤ì •
         * - ê° ë„êµ¬ì˜ ì‹¤í–‰ ë²„íŠ¼ê³¼ ë³µì‚¬ ë²„íŠ¼ ì´ë²¤íŠ¸ ì—°ê²°
         */
        function setupToolButtons() {
            // í•œê¸€ ìëª¨ ë¶„ë¦¬ ë„êµ¬ ì´ë²¤íŠ¸
            document.getElementById('koreanBtn').addEventListener('click', separateKorean);
            document.getElementById('koreanCopyBtn').addEventListener('click', () => {
                const outputText = document.getElementById('koreanOutputText');
                if (outputText) {
                    const text = outputText.textContent || outputText.innerText;
                    // Zero-Width Space (U+200B) ì œê±° í›„ ë³µì‚¬
                    const cleanText = text.replace(/\u200B/g, '');
                    copyToClipboard(cleanText);
                }
            });

            // í•œê¸€ ì…ë ¥ë€ ë°”ì´íŠ¸ ì¹´ìš´í„° ì´ë²¤íŠ¸
            document.getElementById('koreanInput').addEventListener('input', updateKoreanInputCounter);

            // ìœ ë‹ˆì½”ë“œ ê²€ì¦ ë„êµ¬ ì´ë²¤íŠ¸
            document.getElementById('unicodeVerifyBtn').addEventListener('click', verifyUnicode);
            document.getElementById('unicodeVerifyCopyBtn').addEventListener('click', () => {
                const outputText = document.getElementById('unicodeVerifyOutputText');
                if (outputText) {
                    const text = outputText.textContent || outputText.innerText;
                    // Zero-Width Space (U+200B) ì œê±° í›„ ë³µì‚¬
                    const cleanText = text.replace(/\u200B/g, '');
                    copyToClipboard(cleanText);
                }
            });

            // ìœ ë‹ˆì½”ë“œ ê²€ì¦ ì…ë ¥ë€ ë°”ì´íŠ¸ ì¹´ìš´í„° ì´ë²¤íŠ¸
            document.getElementById('unicodeVerifyInput').addEventListener('input', updateUnicodeVerifyInputCounter);
        }

        /* ========================================
           UI ì „í™˜ í•¨ìˆ˜ë“¤ - íƒ­ ë° ì„¹ì…˜ ë³€ê²½
        ======================================== */
        
        /**
         * ë¬¸ì ì¹´í…Œê³ ë¦¬ ì „í™˜ í•¨ìˆ˜
         * @param {string} category - ì „í™˜í•  ì¹´í…Œê³ ë¦¬ ID
         * @param {Element} tabElement - í´ë¦­ëœ íƒ­ ìš”ì†Œ
         */
        function switchCategory(category, tabElement) {
            currentCategory = category;
            
            // ëª¨ë“  ì¹´í…Œê³ ë¦¬ íƒ­ì˜ í™œì„±í™” ìƒíƒœ ì œê±° í›„ ì„ íƒëœ íƒ­ë§Œ í™œì„±í™”
            document.querySelectorAll('.character-picker .tab').forEach(tab => tab.classList.remove('active'));
            tabElement.classList.add('active');
            
            // ìœ ë‹ˆì½”ë“œ ê²€ì¦ íƒ­ì¸ ê²½ìš° ìš°ì¸¡ íŒ¨ë„ ì „í™˜
            if (category === 'unicodeVerify') {
                document.getElementById('koreanPanel').style.display = 'none';
                document.getElementById('unicodeVerifyPanel').style.display = 'flex';
            } else {
                document.getElementById('koreanPanel').style.display = 'flex';
                document.getElementById('unicodeVerifyPanel').style.display = 'none';
                // ì„ íƒëœ ì¹´í…Œê³ ë¦¬ì˜ ë¬¸ìë“¤ì„ ë‹¤ì‹œ ë Œë”ë§
                renderCharacters();
            }
        }


        /* ========================================
           ë¬¸ì ë Œë”ë§ ë° í‘œì‹œ í•¨ìˆ˜ë“¤
        ======================================== */
        
        /**
         * ì„ íƒëœ ì¹´í…Œê³ ë¦¬ì˜ ë¬¸ìë“¤ì„ ê·¸ë¦¬ë“œì— ë Œë”ë§í•˜ëŠ” í•¨ìˆ˜
         * - ì¹´í…Œê³ ë¦¬ë³„ë¡œ êµ¬ë¶„ì„ ê³¼ í•¨ê»˜ ë¬¸ìë“¤ì„ í‘œì‹œ
         * - ê° ë¬¸ìì— í´ë¦­ ì´ë²¤íŠ¸ ì—°ê²° (í´ë¦½ë³´ë“œ ë³µì‚¬)
         */
        function renderCharacters() {
            const grid = document.getElementById('characterGrid');
            grid.innerHTML = ''; // ê¸°ì¡´ ë‚´ìš© ì´ˆê¸°í™”
            
            // í˜„ì¬ ì„ íƒëœ ì¹´í…Œê³ ë¦¬ì˜ ë°ì´í„°ê°€ ì¡´ì¬í•˜ëŠ” ê²½ìš°
            if (characterCategories[currentCategory]) {
                Object.entries(characterCategories[currentCategory]).forEach(([categoryName, characters]) => {
                    // ì¹´í…Œê³ ë¦¬ êµ¬ë¶„ì„  ìƒì„±
                    const divider = document.createElement('div');
                    divider.className = 'category-divider';
                    divider.textContent = categoryName;
                    grid.appendChild(divider);

                    // í•´ë‹¹ ì¹´í…Œê³ ë¦¬ì˜ ëª¨ë“  ë¬¸ìë“¤ì„ ë²„íŠ¼ìœ¼ë¡œ ìƒì„±
                    characters.forEach(char => {
                        const item = document.createElement('button');
                        item.className = 'character-item';
                        item.textContent = char;
                        item.title = `${char} - ${categoryName}`; // íˆ´íŒ í‘œì‹œ
                        item.addEventListener('click', () => copyToClipboard(char)); // í´ë¦­ì‹œ ë³µì‚¬
                        grid.appendChild(item);
                    });
                });
            }
        }

        /**
         * ê²€ìƒ‰ì–´ì— ë”°ë¼ ë¬¸ìë¥¼ í•„í„°ë§í•˜ëŠ” í•¨ìˆ˜
         * @param {string} searchTerm - ì‚¬ìš©ìê°€ ì…ë ¥í•œ ê²€ìƒ‰ì–´
         * - ì¹´í…Œê³ ë¦¬ëª…ê³¼ ë¬¸ì ìì²´ë¥¼ ëŒ€ìƒìœ¼ë¡œ ê²€ìƒ‰
         * - ê²€ìƒ‰ì–´ê°€ ì—†ìœ¼ë©´ ì „ì²´ ë¬¸ì í‘œì‹œ
         */
        function filterCharacters(searchTerm) {
            const term = searchTerm.toLowerCase().trim();
            
            // ê²€ìƒ‰ì–´ê°€ ì—†ìœ¼ë©´ ì „ì²´ ë¬¸ì ë Œë”ë§
            if (term === '') {
                renderCharacters();
                return;
            }
            
            const grid = document.getElementById('characterGrid');
            grid.innerHTML = ''; // ê¸°ì¡´ ë‚´ìš© ì´ˆê¸°í™”
            
            let found = false; // ê²€ìƒ‰ ê²°ê³¼ ì¡´ì¬ ì—¬ë¶€
            
            if (characterCategories[currentCategory]) {
                Object.entries(characterCategories[currentCategory]).forEach(([categoryName, characters]) => {
                    let categoryMatches = [];
                    
                    // ì¹´í…Œê³ ë¦¬ ì´ë¦„ì— ê²€ìƒ‰ì–´ê°€ í¬í•¨ëœ ê²½ìš° ëª¨ë“  ë¬¸ì í‘œì‹œ
                    if (categoryName.toLowerCase().includes(term)) {
                        categoryMatches = characters;
                        found = true;
                    } else {
                        // ê°œë³„ ë¬¸ìì—ì„œ ê²€ìƒ‰ì–´ ì°¾ê¸°
                        categoryMatches = characters.filter(char => 
                            char.includes(term) || 
                            categoryName.toLowerCase().includes(term)
                        );
                        if (categoryMatches.length > 0) found = true;
                    }
                    
                    // ë§¤ì¹­ëœ ê²°ê³¼ê°€ ìˆìœ¼ë©´ í‘œì‹œ
                    if (categoryMatches.length > 0) {
                        // ì¹´í…Œê³ ë¦¬ êµ¬ë¶„ì„ 
                        const divider = document.createElement('div');
                        divider.className = 'category-divider';
                        divider.textContent = categoryName;
                        grid.appendChild(divider);

                        // ë§¤ì¹­ëœ ë¬¸ìë“¤ì„ ë²„íŠ¼ìœ¼ë¡œ ìƒì„±
                        categoryMatches.forEach(char => {
                            const item = document.createElement('button');
                            item.className = 'character-item';
                            item.textContent = char;
                            item.title = `${char} - ${categoryName}`;
                            item.addEventListener('click', () => copyToClipboard(char));
                            grid.appendChild(item);
                        });
                    }
                });
            }
            
            // ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìœ¼ë©´ ì•ˆë‚´ ë©”ì‹œì§€ í‘œì‹œ
            if (!found) {
                grid.innerHTML = '<div class="category-divider">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤</div>';
            }
        }

        /* ========================================
           í´ë¦½ë³´ë“œ ë° ì•Œë¦¼ ê´€ë ¨ í•¨ìˆ˜ë“¤
        ======================================== */
        
        /**
         * í…ìŠ¤íŠ¸ë¥¼ í´ë¦½ë³´ë“œì— ë³µì‚¬í•˜ëŠ” í•¨ìˆ˜
         * @param {string} text - ë³µì‚¬í•  í…ìŠ¤íŠ¸
         * - ìµœì‹  ë¸Œë¼ìš°ì €ì˜ Clipboard API ì‚¬ìš©
         * - ì§€ì›í•˜ì§€ ì•ŠëŠ” ê²½ìš° fallback ë°©ì‹ ì‚¬ìš©
         */
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                showNotification('ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
            }).catch(err => {
                // êµ¬í˜• ë¸Œë¼ìš°ì €ë¥¼ ìœ„í•œ fallback ë°©ì‹
                const textArea = document.createElement('textarea');
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                showNotification('ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
            });
        }

        /**
         * ì¶œë ¥ ì˜ì—­ì˜ í…ìŠ¤íŠ¸ë¥¼ ë³µì‚¬í•˜ëŠ” í•¨ìˆ˜
         * @param {Element} element - ë³µì‚¬í•  í…ìŠ¤íŠ¸ê°€ ìˆëŠ” DOM ìš”ì†Œ
         * - 'ë³µì‚¬' ë²„íŠ¼ í…ìŠ¤íŠ¸ëŠ” ì œì™¸í•˜ê³  ë³µì‚¬
         */
        function copyText(element) {
            let text = element.textContent.replace('ë³µì‚¬', '').trim();
            
            // ê²°í•©ë¬¸ì ì¶œë ¥ì°½ì˜ ê²½ìš° ê³µë°±ì„ ì œê±°í•˜ì—¬ ì‹¤ì œ ê²°í•©ë¬¸ìë¡œ ë³µì‚¬
            if (element.id === 'combiningOutput') {
                text = text.replace(/ /g, '');
            }
            
            copyToClipboard(text);
        }

        /**
         * í™”ë©´ì— ì•Œë¦¼ ë©”ì‹œì§€ë¥¼ í‘œì‹œí•˜ëŠ” í•¨ìˆ˜
         * @param {string} message - í‘œì‹œí•  ë©”ì‹œì§€
         * - ìš°ì¸¡ ìƒë‹¨ì— 2ì´ˆê°„ ì•Œë¦¼ í‘œì‹œ
         */
        function showNotification(message) {
            const notification = document.getElementById('copyNotification');
            notification.textContent = `ğŸ“‹ ${message}`;
            notification.classList.add('show');
            setTimeout(() => {
                notification.classList.remove('show');
            }, 2000);
        }


        /**
         * UCS-2 ê¸°ì¤€ ë°”ì´íŠ¸ ê³„ì‚° í•¨ìˆ˜
         * @param {string} text - ê³„ì‚°í•  í…ìŠ¤íŠ¸
         * @returns {number} - UCS-2 ê¸°ì¤€ ë°”ì´íŠ¸ ìˆ˜
         */
        function calculateUCS2Bytes(text) {
            let bytes = 0;
            for (let i = 0; i < text.length; i++) {
                const codePoint = text.codePointAt(i);
                if (codePoint <= 0xFFFF) {
                    bytes += 2; // BMP: 2ë°”ì´íŠ¸
                } else {
                    bytes += 4; // ë¹„BMP: 4ë°”ì´íŠ¸
                    i++; // ì„œë¡œê²Œì´íŠ¸ í˜ì–´ëŠ” 2ê°œ ë¬¸ìë¥¼ ê±´ë„ˆë›°ì–´ì•¼ í•¨
                }
            }
            return bytes;
        }

        /**
         * í•œê¸€ ì…ë ¥ë€ ê¸€ììˆ˜/ë°”ì´íŠ¸ ì¹´ìš´í„° ì—…ë°ì´íŠ¸ í•¨ìˆ˜
         */
        function updateKoreanInputCounter() {
            const input = document.getElementById('koreanInput').value;
            const counter = document.getElementById('koreanInputCounter');
            const ucs2Bytes = calculateUCS2Bytes(input);
            
            counter.textContent = `${input.length}/70(${ucs2Bytes}/140B)`;
            
            // 140ë°”ì´íŠ¸ ì´ˆê³¼ ì‹œ ê²½ê³  ìƒ‰ìƒ
            if (ucs2Bytes > 140) {
                counter.style.background = '#f8d7da';
                counter.style.color = '#721c24';
            } else if (ucs2Bytes > 112) { // 80% ì´ˆê³¼ ì‹œ ê²½ê³ 
                counter.style.background = '#fff3cd';
                counter.style.color = '#856404';
            } else {
                counter.style.background = '#f8f9fa';
                counter.style.color = '#666';
            }
        }

        /**
         * í•œê¸€ì„ ììŒê³¼ ëª¨ìŒìœ¼ë¡œ ë¶„ë¦¬í•˜ëŠ” í•¨ìˆ˜
         * - ì™„ì„±í˜• í•œê¸€ì„ ì´ˆì„±, ì¤‘ì„±, ì¢…ì„±ìœ¼ë¡œ ë¶„í•´
         * - ìœ ë‹ˆì½”ë“œ í•œê¸€ ìëª¨ ì˜ì—­ ì‚¬ìš©
         */
        function separateKorean() {
            const input = document.getElementById('koreanInput').value;
            const output = document.getElementById('koreanOutput');
            const outputText = document.getElementById('koreanOutputText');
            const outputCounter = document.getElementById('koreanOutputCounter');
            
            if (!input.trim()) {
                outputCounter.textContent = '0/70(0/140B)';
                outputText.innerHTML = '';
                return;
            }
            
            let result = '';
            
            for (let i = 0; i < input.length; i++) {
                const char = input[i];
                const code = char.charCodeAt(0);
                
                if (code >= 0xAC00 && code <= 0xD7A3) {
                    const decomposed = decomposeHangul(char);
                    result += decomposed;
                } else {
                    result += char;
                }
            }
            
            // NFD í˜•ì‹ìœ¼ë¡œ ì •ê·œí™”í•˜ì—¬ ê²°í•©ë¬¸ìê°€ ë¶„ë¦¬ë˜ì–´ ë³´ì´ë„ë¡ í•¨
            const normalizedResult = result.normalize('NFD');
            
            // í•œê¸€ ìëª¨/ì™„ì„±í˜•ì—ë§Œ ìŠ¤ë§ˆíŠ¸í•˜ê²Œ ZWSP ì‚½ì…
            const separatedResult = insertSmartZWSP(normalizedResult);
            
            // ìëª¨ ë¶„ë¦¬ ê²°ê³¼ë¥¼ í¸ì§‘ ê°€ëŠ¥í•œ ì˜ì—­ì— í‘œì‹œ
            outputText.innerHTML = separatedResult;
            
            // ë°”ì´íŠ¸ ìˆ˜ ì—…ë°ì´íŠ¸
            updateOutputCounter();
            
            // í¸ì§‘ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
            outputText.addEventListener('input', updateOutputCounter);
            outputText.addEventListener('keyup', updateOutputCounter);
            outputText.addEventListener('paste', updateOutputCounter);
        }

        /**
         * ì¶œë ¥ ì˜ì—­ì˜ ë°”ì´íŠ¸ ì¹´ìš´í„°ë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” í•¨ìˆ˜
         * - Zero-Width Space (U+200B)ëŠ” ì¹´ìš´íŒ…ì—ì„œ ì œì™¸
         */
        function updateOutputCounter() {
            const outputText = document.getElementById('koreanOutputText');
            const outputCounter = document.getElementById('koreanOutputCounter');
            
            if (outputText) {
                const text = outputText.textContent || outputText.innerText;
                // Zero-Width Space (U+200B) ì œê±°
                const cleanText = text.replace(/\u200B/g, '');
                const charCount = cleanText.length;
                const ucs2Bytes = calculateUCS2Bytes(cleanText);
                outputCounter.textContent = `${charCount}/70(${ucs2Bytes}/140B)`;
                
                // 140ë°”ì´íŠ¸ ì´ˆê³¼ ì‹œ ê²½ê³  ìƒ‰ìƒ
                if (ucs2Bytes > 140) {
                    outputCounter.style.background = '#f8d7da';
                    outputCounter.style.color = '#721c24';
                } else if (ucs2Bytes > 112) { // 80% ì´ˆê³¼ ì‹œ ê²½ê³ 
                    outputCounter.style.background = '#fff3cd';
                    outputCounter.style.color = '#856404';
                } else {
                    outputCounter.style.background = '#f8f9fa';
                    outputCounter.style.color = '#666';
                }
            }
        }

        /**
         * ê°œë³„ í•œê¸€ ë¬¸ìë¥¼ ìëª¨ë¡œ ë¶„í•´í•˜ëŠ” í•¨ìˆ˜
         * @param {string} char - ë¶„í•´í•  í•œê¸€ ë¬¸ì
         * @returns {string} - ë¶„í•´ëœ ìëª¨ ë¬¸ìì—´
         * - ìœ ë‹ˆì½”ë“œ í•œê¸€ ì™„ì„±í˜•ì„ ì´ˆì„±, ì¤‘ì„±, ì¢…ì„±ìœ¼ë¡œ ë¶„ë¦¬
         */
        function decomposeHangul(char) {
            const code = char.charCodeAt(0);
            const base = code - 0xAC00;
            
            const choIndex = Math.floor(base / 588);
            const jungIndex = Math.floor((base % 588) / 28);
            const jongIndex = base % 28;
            
            let result = '';
            
            const choUnicode = 0x1100 + choIndex;
            result += String.fromCharCode(choUnicode);
            
            const jungUnicode = 0x1161 + jungIndex;
            result += String.fromCharCode(jungUnicode);
            
            if (jongIndex > 0) {
                const jongUnicode = 0x11A7 + jongIndex;
                result += String.fromCharCode(jongUnicode);
            }
            
            return result;
        }

        /* ========================================
           ìŠ¤ë§ˆíŠ¸ ZWSP ì‚½ì… í•¨ìˆ˜
        ======================================== */
        
        /**
         * í•œê¸€ ìëª¨/ì™„ì„±í˜•ì—ë§Œ ZWSPë¥¼ ìŠ¤ë§ˆíŠ¸í•˜ê²Œ ì‚½ì…í•˜ëŠ” í•¨ìˆ˜
         * @param {string} text - ì²˜ë¦¬í•  í…ìŠ¤íŠ¸
         * @returns {string} - ZWSPê°€ ì‚½ì…ëœ í…ìŠ¤íŠ¸
         */
        function insertSmartZWSP(text) {
            const result = [];
            
            for (let i = 0; i < text.length; i++) {
                const current = text[i];
                const next = text[i + 1];
                
                result.push(current);
                
                // ë‹¤ìŒ ë¬¸ìê°€ ì—†ìœ¼ë©´ ì¢…ë£Œ
                if (!next) break;
                
                const currentCode = current.charCodeAt(0);
                const nextCode = next.charCodeAt(0);
                
                // í˜„ì¬ ë¬¸ìê°€ í•œê¸€ ìëª¨/ì™„ì„±í˜•ì¸ì§€ í™•ì¸
                const isCurrentHangul = (
                    (currentCode >= 0x1100 && currentCode <= 0x11FF) || // í•œê¸€ ìëª¨
                    (currentCode >= 0xAC00 && currentCode <= 0xD7A3)    // ì™„ì„±í˜• í•œê¸€
                );
                
                // ë‹¤ìŒ ë¬¸ìê°€ í•œê¸€ ìëª¨/ì™„ì„±í˜•ì¸ì§€ í™•ì¸
                const isNextHangul = (
                    (nextCode >= 0x1100 && nextCode <= 0x11FF) || // í•œê¸€ ìëª¨
                    (nextCode >= 0xAC00 && nextCode <= 0xD7A3)    // ì™„ì„±í˜• í•œê¸€
                );
                
                // ë‹¤ìŒ ë¬¸ìê°€ ì‚½ì… ê¸ˆì§€ ëŒ€ìƒì¸ì§€ í™•ì¸
                const isNextForbidden = (
                    (nextCode >= 0x41 && nextCode <= 0x5A) ||     // A-Z
                    (nextCode >= 0x61 && nextCode <= 0x7A) ||     // a-z
                    (nextCode >= 0x30 && nextCode <= 0x39) ||     // 0-9
                    (nextCode >= 0x1F000) ||                      // ì´ëª¨ì§€
                    (nextCode === 0x20) ||                        // ê³µë°±
                    (nextCode === 0x09) ||                        // íƒ­
                    (nextCode === 0x0A) ||                        // ì¤„ë°”ê¿ˆ
                    (nextCode === 0x0D)                           // ìºë¦¬ì§€ ë¦¬í„´
                );
                
                // ZWSP ì‚½ì… ì¡°ê±´ í™•ì¸
                if (isCurrentHangul && isNextHangul && !isNextForbidden) {
                    // í˜„ì¬ê°€ ì™„ì„±í˜•ì´ê³  ë‹¤ìŒì´ ìëª¨ì¸ ê²½ìš°
                    if ((currentCode >= 0xAC00 && currentCode <= 0xD7A3) && 
                        (nextCode >= 0x1100 && nextCode <= 0x11FF)) {
                        result.push('\u200B');
                    }
                    // í˜„ì¬ê°€ ìëª¨ì´ê³  ë‹¤ìŒì´ ì™„ì„±í˜•ì¸ ê²½ìš°
                    else if ((currentCode >= 0x1100 && currentCode <= 0x11FF) && 
                             (nextCode >= 0xAC00 && nextCode <= 0xD7A3)) {
                        result.push('\u200B');
                    }
                    // í˜„ì¬ê°€ ìëª¨ì´ê³  ë‹¤ìŒì´ ìëª¨ì¸ ê²½ìš°
                    else if ((currentCode >= 0x1100 && currentCode <= 0x11FF) && 
                             (nextCode >= 0x1100 && nextCode <= 0x11FF)) {
                        result.push('\u200B');
                    }
                }
            }
            
            return result.join('');
        }

        /* ========================================
           ìœ ë‹ˆì½”ë“œ ê²€ì¦ ë„êµ¬ í•¨ìˆ˜ë“¤
        ======================================== */

        /**
         * ìœ ë‹ˆì½”ë“œ ê²€ì¦ ì…ë ¥ë€ ê¸€ììˆ˜/ë°”ì´íŠ¸ ì¹´ìš´í„° ì—…ë°ì´íŠ¸ í•¨ìˆ˜
         */
        function updateUnicodeVerifyInputCounter() {
            const input = document.getElementById('unicodeVerifyInput').value;
            const counter = document.getElementById('unicodeVerifyInputCounter');
            const ucs2Bytes = calculateUCS2Bytes(input);
            
            counter.textContent = `${input.length}/70(${ucs2Bytes}/140B)`;
            
            // 140ë°”ì´íŠ¸ ì´ˆê³¼ ì‹œ ê²½ê³  ìƒ‰ìƒ
            if (ucs2Bytes > 140) {
                counter.style.background = '#f8d7da';
                counter.style.color = '#721c24';
            } else if (ucs2Bytes > 112) { // 80% ì´ˆê³¼ ì‹œ ê²½ê³ 
                counter.style.background = '#fff3cd';
                counter.style.color = '#856404';
            } else {
                counter.style.background = '#f8f9fa';
                counter.style.color = '#666';
            }
        }

        /**
         * ìœ ë‹ˆì½”ë“œ ê²€ì¦ í•¨ìˆ˜
         * - ì…ë ¥ëœ í…ìŠ¤íŠ¸ì˜ ìœ ë‹ˆì½”ë“œ êµ¬ì„±ì„ Zero-Width Spaceë¡œ ë¶„ë¦¬í•˜ì—¬ í‘œì‹œ
         * - ë³€í™˜í•˜ì§€ ì•Šê³  ìˆœìˆ˜í•˜ê²Œ ê²€ì¦ë§Œ ìˆ˜í–‰
         */
        function verifyUnicode() {
            const input = document.getElementById('unicodeVerifyInput').value;
            const outputText = document.getElementById('unicodeVerifyOutputText');
            const outputCounter = document.getElementById('unicodeVerifyOutputCounter');
            
            if (!input.trim()) {
                outputCounter.textContent = '0/70(0/140B)';
                outputText.innerHTML = '';
                return;
            }
            
            // ë³€í™˜í•˜ì§€ ì•Šê³  ì›ë³¸ í…ìŠ¤íŠ¸ë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©
            // í•œê¸€ ìëª¨/ì™„ì„±í˜•ì—ë§Œ ìŠ¤ë§ˆíŠ¸í•˜ê²Œ ZWSP ì‚½ì…
            const separatedResult = insertSmartZWSP(input);
            
            // ê²€ì¦ ê²°ê³¼ë¥¼ í¸ì§‘ ê°€ëŠ¥í•œ ì˜ì—­ì— í‘œì‹œ
            outputText.innerHTML = separatedResult;
            
            // ë°”ì´íŠ¸ ìˆ˜ ì—…ë°ì´íŠ¸
            updateUnicodeVerifyOutputCounter();
            
            // í¸ì§‘ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
            outputText.addEventListener('input', updateUnicodeVerifyOutputCounter);
            outputText.addEventListener('keyup', updateUnicodeVerifyOutputCounter);
            outputText.addEventListener('paste', updateUnicodeVerifyOutputCounter);
        }

        /**
         * ìœ ë‹ˆì½”ë“œ ê²€ì¦ ì¶œë ¥ ì˜ì—­ì˜ ë°”ì´íŠ¸ ì¹´ìš´í„°ë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” í•¨ìˆ˜
         * - Zero-Width Space (U+200B)ëŠ” ì¹´ìš´íŒ…ì—ì„œ ì œì™¸
         */
        function updateUnicodeVerifyOutputCounter() {
            const outputText = document.getElementById('unicodeVerifyOutputText');
            const outputCounter = document.getElementById('unicodeVerifyOutputCounter');
            
            if (outputText) {
                const text = outputText.textContent || outputText.innerText;
                // Zero-Width Space (U+200B) ì œê±°
                const cleanText = text.replace(/\u200B/g, '');
                const charCount = cleanText.length;
                const ucs2Bytes = calculateUCS2Bytes(cleanText);
                outputCounter.textContent = `${charCount}/70(${ucs2Bytes}/140B)`;
                
                // 140ë°”ì´íŠ¸ ì´ˆê³¼ ì‹œ ê²½ê³  ìƒ‰ìƒ
                if (ucs2Bytes > 140) {
                    outputCounter.style.background = '#f8d7da';
                    outputCounter.style.color = '#721c24';
                } else if (ucs2Bytes > 112) { // 80% ì´ˆê³¼ ì‹œ ê²½ê³ 
                    outputCounter.style.background = '#fff3cd';
                    outputCounter.style.color = '#856404';
                } else {
                    outputCounter.style.background = '#f8f9fa';
                    outputCounter.style.color = '#666';
                }
            }
        }

    </script>
</body>
</html>
